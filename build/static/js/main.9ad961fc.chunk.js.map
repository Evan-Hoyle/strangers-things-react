{"version":3,"sources":["components/AccountForm.js","components/Post.js","components/AddPosts.js","components/DeletePosts.js","components/SendMessage.js","components/PostList.js","components/Profile.js","index.js"],"names":["AccountForm","type","setToken","setUser","useState","username","setUsername","password","setPassword","title","oppositeTitle","oppositeType","handleSubmit","ev","a","preventDefault","fetch","method","headers","body","JSON","stringify","user","response","json","data","token","onSubmit","value","onChange","target","placeholder","to","Post","prop","post","className","description","price","author","AddPost","props","posts","setPosts","setTitle","setDescription","setPrice","DeletePost","id","fetchPosts","handleDelete","console","log","onClick","SendMessage","message","setMessage","content","PostList","useEffect","AddPosts","map","isAuthor","_id","Profile","hasMessages","messages","length","idx","fromUser","App","localStorage","getItem","React","setItem","success","removeItem","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9ad961fc.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport {Link} from 'react-router-dom'; \r\n\r\nconst AccountForm = ({type, setToken, setUser}) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const title = type === 'login' ? 'Login' : 'Register';\r\n  const oppositeTitle = type === 'login' ? 'Register' : 'Login';\r\n  const oppositeType = type === 'login' ? 'register' : 'login';\r\n\r\n\r\n  const handleSubmit = async (ev) => {\r\n    ev.preventDefault();\r\n    \r\n    const response = await fetch(`https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/${type}`, { // or use the `/users/login` route for login!\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        user: {\r\n          username,\r\n          password\r\n        }\r\n      })\r\n    });\r\n    \r\n    const {data} = await response.json();\r\n    \r\n    const token = data?.token;\r\n    \r\n    if (token) {\r\n      setToken(token);\r\n      const response = await fetch(`https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      const {data} = await response.json();\r\n      \r\n      setUser(data);\r\n    }\r\n    setUsername('');\r\n    setPassword('');\r\n  }\r\n\r\n  return <>\r\n    <h2>{title}</h2>\r\n    <form onSubmit={handleSubmit}>\r\n      <input type=\"text\" value={username} onChange={(ev) => setUsername(ev.target.value)}placeholder=\"username\"></input>\r\n      <input type=\"password\" value={password} onChange={(ev) => setPassword(ev.target.value)}placeholder=\"password\"></input>\r\n      <button type=\"submit\">{title}</button>\r\n    </form>    \r\n    <Link to={`/${oppositeType}`}>{oppositeTitle}</Link>\r\n  </>\r\n}\r\n\r\nexport default AccountForm;","const Post = (prop) => {\r\n    const {post} = prop\r\n    return <div className='post'>\r\n        <h3>{post.title}</h3>\r\n        <p>{post.description}</p>\r\n        <p>{post.price}</p>\r\n        <p>User: {post.author.username}</p>\r\n    </div>\r\n}\r\nexport default Post","import React, { useState } from 'react'\r\n\r\nconst AddPost = (props) => {\r\n    const {token, posts, setPosts} = props\r\n    const [title, setTitle] = useState ('')\r\n    const [description, setDescription] = useState ('')\r\n    const [price, setPrice] = useState ('')\r\n\r\n    const handleSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const response = await fetch ('https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts', \r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json', \r\n                'Authorization': `Bearer ${token}` \r\n            },\r\n            body: JSON.stringify ({\r\n                post: {\r\n                    title: title, \r\n                    description: description,\r\n                    price: price\r\n                }\r\n            })\r\n        })\r\n        const {data} = await response.json()\r\n        setPosts([data.post, ...posts])\r\n        setTitle('')\r\n        setDescription('')\r\n        setPrice('')\r\n    }\r\n\r\n    return <div className='formAlign'>\r\n    <form className='form' onSubmit={handleSubmit}>\r\n        <input type='text' value={title} placeholder='Title' onChange={(ev)=>{\r\n            setTitle(ev.target.value)\r\n        }}></input>\r\n        <input type='text' value={description} placeholder='Description' onChange={(ev)=>{\r\n            setDescription(ev.target.value)\r\n        }}></input>\r\n        <input type='text' value={price} placeholder='Price' onChange={(ev)=>{\r\n            setPrice(ev.target.value)\r\n        }}></input>\r\n        <button className='submitButton btn btn-dark btn-sm'>Submit Post</button>\r\n    </form>\r\n    </div>\r\n}\r\n\r\nexport default AddPost","import React, { useState } from 'react'\r\n\r\nconst DeletePost = (props) => {\r\n\r\n    const {id, token, fetchPosts} = props\r\n    \r\n    const handleDelete = async () => {\r\n        const response = await fetch (`https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/${id}`,\r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type' : 'application/json',\r\n                'Authorization' : `Bearer ${token}`\r\n            }\r\n        })\r\n        console.log(response)\r\n        fetchPosts()\r\n    }\r\n    return <button onClick={handleDelete}>Delete</button>\r\n}\r\n\r\nexport default DeletePost;","import React, {useState} from 'react'\r\n\r\nconst SendMessage = (props) => {\r\n    const {token, id} = props\r\n\r\n    const [message, setMessage] = useState('')\r\n\r\n    const handleSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const response = await fetch (`https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/${id}/messages`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'Content-type': 'application/json', \r\n                'Authorization': `Bearer ${token}` \r\n            },\r\n            body : JSON.stringify ({\r\n                message : {\r\n                    content : message\r\n                }\r\n            })\r\n        })\r\n        console.log ('message', response)\r\n        setMessage('')\r\n    }\r\n\r\n    return <form onSubmit={handleSubmit}>\r\n        <button className='sendButton btn btn-dark btn-sm'>Send Message</button>\r\n        <input type='text' value={message} onChange={(ev) => {\r\n            setMessage(ev.target.value)\r\n        }}></input>\r\n    </form>\r\n\r\n}\r\nexport default SendMessage","import React, { useState, useEffect, Fragment } from 'react';\r\nimport Post from './Post'\r\nimport AddPosts from './AddPosts'\r\nimport DeletePost from './DeletePosts'\r\nimport SendMessage from './SendMessage';\r\n\r\nconst PostList = ({token}) => {\r\n\r\n    const [posts, setPosts] = useState([]);\r\n\r\n    const fetchPosts = async () => {\r\n      const response = await fetch(`https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts`,\r\n        {headers:{'Authorization': 'Bearer ' + token}})\r\n        \r\n        const {data} = await response.json();\r\n        console.log (data.posts)\r\n        setPosts (data.posts)\r\n    }\r\n\r\n    useEffect (() => {\r\n        \r\n      fetchPosts()\r\n\r\n      },[]);\r\n      return <div className='postList'>\r\n        {token ? <AddPosts token={token} posts={posts} setPosts={setPosts}/>: ''}\r\n      <h2>Posts</h2>\r\n\r\n      {\r\n          posts.map ((post) => {\r\n              return <Fragment key={post._id}> <div className='postWrap'>\r\n                <Post post={post}/>\r\n                {post.isAuthor ? <DeletePost id={post._id} token={token} fetchPosts={fetchPosts}/> : ''}\r\n                {!post.isAuthor && token ? <SendMessage id={post._id} token={token}/> : ''}\r\n                </div>\r\n              </Fragment>\r\n          })\r\n      }\r\n\r\n      </div>\r\n\r\n}\r\n\r\nexport default PostList;","const Profile = (props) => {\r\n    \r\n    const {user} = props\r\n    console.log (user)\r\n    const hasMessages = user.messages && user.messages.length > 0\r\n    return <div className='profile'>\r\n        <h3>Profile</h3>\r\n        <h4>Messages</h4>\r\n        {\r\n            hasMessages ? user.messages.map((message, idx) => {\r\n                return <div className='message' key={idx}>\r\n                    <h5>Subject: {message.post.title}</h5>\r\n                    <p>{message.content}</p>\r\n                    <p>From: {message.fromUser.username}</p>\r\n                </div>\r\n            }) : ''\r\n        }\r\n    </div>\r\n\r\n}\r\n\r\nexport default Profile","import React, { useReducer, useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter as Router, Route, Link} from 'react-router-dom';\r\n\r\nimport './bootstrap.css';\r\n\r\nimport {\r\n    AccountForm,\r\n    PostList,\r\n    Profile\r\n  } from './components';\r\n  \r\n  const App = () => {\r\n    const [token, setToken] = useState(localStorage.getItem('token') || '');\r\n    const [user, setUser] = useState({});\r\n    \r\n    React.useEffect(() => {\r\n      localStorage.setItem('token', token);\r\n    }, [token]);\r\n\r\n     useEffect (async() => {\r\n\r\n      const response = await fetch ('https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me', \r\n      {headers:{'Authorization': 'Bearer ' + token}})\r\n      let data = await response.json()\r\n      console.log(data)\r\n      if (data.success) {\r\n        setUser(data.data)\r\n      } \r\n    },[token])\r\n  \r\n    return <>\r\n      <h1>\r\n        Strangers Things\r\n      </h1>\r\n      {user.username && <div className='hello'>Hello {user.username}<button className='logout' onClick={() => {\r\n        setUser({})\r\n        setToken('')\r\n        localStorage.removeItem('token')\r\n      }}>Logout</button></div> }\r\n      <div>\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n        <div id=\"navbarNav\">\r\n            <ul className=\"navbar-nav\">\r\n            {!token ? <li className=\"nav-item active\">\r\n            <Link className='nav-link' to='/login'>Login</Link>\r\n            </li> : ''}\r\n            <li className=\"nav-item\">\r\n            <Link className='nav-link' to='/posts'>Posts</Link>\r\n            </li>\r\n            {token ? <li className=\"nav-item\">\r\n            <Link className='nav-link' to='/profile'>Profile</Link>\r\n            </li> : ''}\r\n            </ul>\r\n        </div>\r\n    </nav>\r\n      </div>\r\n      <Route path=\"/login\">\r\n        <AccountForm type={'login'} setToken={setToken} setUser={setUser}/>\r\n      </Route>\r\n      <Route path= '/register'>\r\n        <AccountForm type={'register'} setToken={setToken} setUser={setUser}/>\r\n      </Route>\r\n      <Route path='/posts'>\r\n        <PostList token={token}/>\r\n      </Route>\r\n      <Route path='/profile'>\r\n        <Profile user={user}/>\r\n      </Route>\r\n    </>\r\n  }\r\n  \r\n  ReactDOM.render(\r\n    <Router>\r\n      <App />\r\n    </Router>,\r\n    document.getElementById('app'),\r\n  );"],"sourceRoot":""}